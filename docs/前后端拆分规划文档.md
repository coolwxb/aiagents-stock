# AIè‚¡ç¥¨åˆ†æç³»ç»Ÿå‰åç«¯æ‹†åˆ†è§„åˆ’æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è§„åˆ’äº†å°†ç°æœ‰åŸºäºStreamlitçš„AIè‚¡ç¥¨åˆ†æç³»ç»Ÿæ‹†åˆ†ä¸ºå‰åç«¯åˆ†ç¦»æ¶æ„çš„å®Œæ•´æ–¹æ¡ˆã€‚å‰ç«¯é‡‡ç”¨Vue Admin Templateæ¡†æ¶ï¼Œåç«¯é‡‡ç”¨FastAPIæ¡†æ¶ã€‚

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2024-12-XX  
**æœ€åæ›´æ–°**: 2024-12-XX

---

## ğŸ“Š é¡¹ç›®ç°çŠ¶åˆ†æ

### å½“å‰æ¶æ„
- **å‰ç«¯æ¡†æ¶**: Streamlit (Python Webæ¡†æ¶)
- **åç«¯é€»è¾‘**: Pythonä¸šåŠ¡é€»è¾‘ä¸å‰ç«¯UIæ··åˆ
- **æ•°æ®å­˜å‚¨**: SQLiteæ•°æ®åº“
- **éƒ¨ç½²æ–¹å¼**: å•ä½“åº”ç”¨ï¼ŒDockeréƒ¨ç½²

### ä¸»è¦åŠŸèƒ½æ¨¡å—
1. **è‚¡ç¥¨åˆ†ææ¨¡å—** - å•è‚¡/æ‰¹é‡åˆ†æï¼Œå¤šAIæ™ºèƒ½ä½“ååŒ
2. **æ™ºç­–æ¿å—æ¨¡å—** - æ¿å—ç­–ç•¥åˆ†æï¼Œå®šæ—¶ä»»åŠ¡
3. **æ™ºç°é¾™è™æ¨¡å—** - é¾™è™æ¦œåˆ†æï¼ŒAIè¯„åˆ†æ’å
4. **ä¸»åŠ›é€‰è‚¡æ¨¡å—** - ä¸»åŠ›èµ„é‡‘é€‰è‚¡ï¼Œæ‰¹é‡åˆ†æ
5. **æ™ºèƒ½ç›¯ç›˜æ¨¡å—** - AIè‡ªåŠ¨äº¤æ˜“å†³ç­–ï¼Œå®æ—¶ç›‘æ§
6. **å®æ—¶ç›‘æµ‹æ¨¡å—** - ä»·æ ¼ç›‘æµ‹ï¼Œé€šçŸ¥æ¨é€
7. **æŒä»“åˆ†ææ¨¡å—** - æŒä»“ç®¡ç†ï¼Œå®šæ—¶åˆ†æ
8. **é‡åŒ–äº¤æ˜“æ¨¡å—** - MiniQMTé›†æˆï¼Œè‡ªåŠ¨äº¤æ˜“
9. **é€šçŸ¥ç³»ç»Ÿæ¨¡å—** - é‚®ä»¶/Webhooké€šçŸ¥
10. **ç¯å¢ƒé…ç½®æ¨¡å—** - ç³»ç»Ÿé…ç½®ç®¡ç†

### æ‹†åˆ†ç›®æ ‡
- âœ… å‰åç«¯å®Œå…¨åˆ†ç¦»ï¼Œç‹¬ç«‹å¼€å‘éƒ¨ç½²
- âœ… åç«¯æä¾›RESTful APIæ¥å£
- âœ… å‰ç«¯ä½¿ç”¨Vue Admin Templateæ„å»ºç°ä»£åŒ–UI
- âœ… ä¿æŒæ‰€æœ‰ç°æœ‰åŠŸèƒ½å®Œæ•´æ€§
- âœ… æå‡ç³»ç»Ÿå¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§
- âœ… æ”¯æŒå¤šç«¯è®¿é—®ï¼ˆWeb/ç§»åŠ¨ç«¯ï¼‰

---

## ğŸ—ï¸ æ–°æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·å±‚                                 â”‚
â”‚              Webæµè§ˆå™¨ / ç§»åŠ¨ç«¯æµè§ˆå™¨                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±‚ (Vue Admin Template)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  è·¯ç”±ç®¡ç†    â”‚  â”‚  çŠ¶æ€ç®¡ç†    â”‚  â”‚  APIè¯·æ±‚å±‚   â”‚      â”‚
â”‚  â”‚  Vue Router  â”‚  â”‚   Vuex       â”‚  â”‚  Axios       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              ä¸šåŠ¡ç»„ä»¶å±‚                                â”‚   â”‚
â”‚  â”‚  è‚¡ç¥¨åˆ†æ | æ™ºç­–æ¿å— | æ™ºç°é¾™è™ | ä¸»åŠ›é€‰è‚¡ | ...      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ RESTful API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APIç½‘å…³å±‚ (FastAPI)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           è·¯ç”±åˆ†å‘ | è®¤è¯æˆæƒ | è¯·æ±‚éªŒè¯              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡æœåŠ¡å±‚ (FastAPI)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  è‚¡ç¥¨åˆ†æ    â”‚  â”‚  æ™ºç­–æ¿å—    â”‚  â”‚  æ™ºç°é¾™è™    â”‚      â”‚
â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ä¸»åŠ›é€‰è‚¡    â”‚  â”‚  æ™ºèƒ½ç›¯ç›˜    â”‚  â”‚  å®æ—¶ç›‘æµ‹    â”‚      â”‚
â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æŒä»“åˆ†æ    â”‚  â”‚  é‡åŒ–äº¤æ˜“    â”‚  â”‚  é€šçŸ¥æœåŠ¡    â”‚      â”‚
â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚  â”‚  æœåŠ¡æ¨¡å—    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®è®¿é—®å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æ•°æ®è·å–    â”‚  â”‚  æ•°æ®åº“ORM   â”‚  â”‚  ç¼“å­˜å±‚      â”‚      â”‚
â”‚  â”‚  AKShare     â”‚  â”‚  SQLAlchemy  â”‚  â”‚  Redis       â”‚      â”‚
â”‚  â”‚  Tushare     â”‚  â”‚  Peewee      â”‚  â”‚  (å¯é€‰)      â”‚      â”‚
â”‚  â”‚  TDX API     â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  SQLite      â”‚  â”‚  æ–‡ä»¶å­˜å‚¨    â”‚  â”‚  å¤–éƒ¨æœåŠ¡    â”‚      â”‚
â”‚  â”‚  æ•°æ®åº“      â”‚  â”‚  PDF/æŠ¥å‘Š    â”‚  â”‚  DeepSeek    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆé€‰å‹

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **åŸºç¡€æ¨¡æ¿**: vue-admin-template (PanJiaChen/vue-admin-template)
- **æ¡†æ¶**: Vue 2.6.10
- **UIç»„ä»¶åº“**: Element UI 2.13.2
- **çŠ¶æ€ç®¡ç†**: Vuex 3.1.0
- **è·¯ç”±ç®¡ç†**: Vue Router 3.0.6
- **HTTPå®¢æˆ·ç«¯**: Axios 0.18.1
- **å›¾è¡¨åº“**: ECharts (å¾…é›†æˆ)
- **æ„å»ºå·¥å…·**: Vue CLI 4.4.4 / Webpack
- **ä»£ç è§„èŒƒ**: ESLint 6.7.2
- **æ ·å¼é¢„å¤„ç†**: Sass
- **å›¾æ ‡**: SVG Sprite Loader

#### åç«¯æŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**: FastAPI 0.104+
- **å¼‚æ­¥æ¡†æ¶**: asyncio + aiohttp
- **ORM**: SQLAlchemy 2.0+ (æ¨è) æˆ– Peewee (å…¼å®¹ç°æœ‰)
- **æ•°æ®åº“**: SQLite (ç°æœ‰) / PostgreSQL (å¯é€‰å‡çº§)
- **ç¼“å­˜**: Redis (å¯é€‰ï¼Œç”¨äºæå‡æ€§èƒ½)
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery + Redis (å®šæ—¶ä»»åŠ¡)
- **APIæ–‡æ¡£**: FastAPIè‡ªåŠ¨ç”Ÿæˆ (Swagger/OpenAPI)
- **è®¤è¯æˆæƒ**: JWT Token
- **æ•°æ®éªŒè¯**: Pydantic
- **æ—¥å¿—**: Python logging + loguru

#### æ•°æ®æºé›†æˆ
- **è‚¡ç¥¨æ•°æ®**: AKShare, Tushare, TDX API
- **AIæœåŠ¡**: DeepSeek API
- **é‡åŒ–äº¤æ˜“**: MiniQMT (xtquant)
- **é€šçŸ¥æœåŠ¡**: SMTP (é‚®ä»¶), Webhook (é’‰é’‰/é£ä¹¦)

---

## ğŸ“¦ æ¨¡å—æ‹†åˆ†æ–¹æ¡ˆ

### 1. åç«¯æ¨¡å—æ‹†åˆ†

#### 1.1 é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database.py             # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ dependencies.py         # ä¾èµ–æ³¨å…¥
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ deps.py             # ä¾èµ–é¡¹ï¼ˆè®¤è¯ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ v1/                 # API v1ç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ router.py       # è·¯ç”±æ±‡æ€»
â”‚   â”‚   â”‚   â”œâ”€â”€ stock.py        # è‚¡ç¥¨åˆ†æAPI
â”‚   â”‚   â”‚   â”œâ”€â”€ sector.py       # æ™ºç­–æ¿å—API
â”‚   â”‚   â”‚   â”œâ”€â”€ longhubang.py   # æ™ºç°é¾™è™API
â”‚   â”‚   â”‚   â”œâ”€â”€ mainforce.py    # ä¸»åŠ›é€‰è‚¡API
â”‚   â”‚   â”‚   â”œâ”€â”€ monitor.py      # æ™ºèƒ½ç›¯ç›˜API
â”‚   â”‚   â”‚   â”œâ”€â”€ realtime.py     # å®æ—¶ç›‘æµ‹API
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio.py    # æŒä»“åˆ†æAPI
â”‚   â”‚   â”‚   â”œâ”€â”€ trading.py      # é‡åŒ–äº¤æ˜“API
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.py # é€šçŸ¥æœåŠ¡API
â”‚   â”‚   â”‚   â””â”€â”€ config.py       # é…ç½®ç®¡ç†API
â”‚   â”‚   â””â”€â”€ websocket.py        # WebSocketæ”¯æŒï¼ˆå®æ—¶æ•°æ®æ¨é€ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ security.py         # å®‰å…¨è®¤è¯
â”‚   â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ exceptions.py       # å¼‚å¸¸å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ stock.py            # è‚¡ç¥¨ç›¸å…³æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ analysis.py         # åˆ†æç»“æœæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ monitor.py          # ç›‘æµ‹ç›¸å…³æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ portfolio.py        # æŒä»“ç›¸å…³æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.py             # ç”¨æˆ·æ¨¡å‹ï¼ˆå¦‚éœ€è¦ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                # Pydanticæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ stock.py            # è‚¡ç¥¨è¯·æ±‚/å“åº”æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ analysis.py         # åˆ†æè¯·æ±‚/å“åº”æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ monitor.py          # ç›‘æµ‹è¯·æ±‚/å“åº”æ¨¡å¼
â”‚   â”‚   â””â”€â”€ common.py           # é€šç”¨æ¨¡å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ stock_service.py    # è‚¡ç¥¨åˆ†ææœåŠ¡
â”‚   â”‚   â”œâ”€â”€ sector_service.py   # æ™ºç­–æ¿å—æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ longhubang_service.py # æ™ºç°é¾™è™æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ mainforce_service.py  # ä¸»åŠ›é€‰è‚¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ monitor_service.py    # æ™ºèƒ½ç›¯ç›˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ realtime_service.py   # å®æ—¶ç›‘æµ‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ portfolio_service.py  # æŒä»“åˆ†ææœåŠ¡
â”‚   â”‚   â”œâ”€â”€ trading_service.py    # é‡åŒ–äº¤æ˜“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ notification_service.py # é€šçŸ¥æœåŠ¡
â”‚   â”‚   â””â”€â”€ data_service.py       # æ•°æ®è·å–æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                   # æ•°æ®è·å–å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ stock_data.py       # è‚¡ç¥¨æ•°æ®è·å–
â”‚   â”‚   â”œâ”€â”€ sector_data.py      # æ¿å—æ•°æ®è·å–
â”‚   â”‚   â”œâ”€â”€ longhubang_data.py  # é¾™è™æ¦œæ•°æ®è·å–
â”‚   â”‚   â”œâ”€â”€ mainforce_data.py   # ä¸»åŠ›èµ„é‡‘æ•°æ®è·å–
â”‚   â”‚   â”œâ”€â”€ tdx_data.py         # TDXæ•°æ®æº
â”‚   â”‚   â””â”€â”€ data_source_manager.py # æ•°æ®æºç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/                 # AIæ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ stock_agents.py     # è‚¡ç¥¨åˆ†ææ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ sector_agents.py    # æ¿å—åˆ†ææ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ longhubang_agents.py # é¾™è™æ¦œåˆ†ææ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ mainforce_agents.py  # ä¸»åŠ›é€‰è‚¡æ™ºèƒ½ä½“
â”‚   â”‚   â””â”€â”€ deepseek_client.py   # DeepSeekå®¢æˆ·ç«¯
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                     # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py             # æ•°æ®åº“åŸºç±»
â”‚   â”‚   â”œâ”€â”€ stock_db.py         # è‚¡ç¥¨åˆ†ææ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ monitor_db.py       # ç›‘æµ‹æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ portfolio_db.py     # æŒä»“æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ longhubang_db.py    # é¾™è™æ¦œæ•°æ®åº“
â”‚   â”‚   â””â”€â”€ sector_db.py        # æ¿å—æ•°æ®åº“
â”‚   â”‚
â”‚   â”œâ”€â”€ tasks/                  # åå°ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ celery_app.py       # Celeryåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ monitor_tasks.py    # ç›‘æµ‹ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ portfolio_tasks.py  # æŒä»“åˆ†æä»»åŠ¡
â”‚   â”‚   â””â”€â”€ sector_tasks.py     # æ¿å—å®šæ—¶ä»»åŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ pdf_generator.py    # PDFç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ validators.py       # æ•°æ®éªŒè¯
â”‚   â”‚   â””â”€â”€ helpers.py          # è¾…åŠ©å‡½æ•°
â”‚   â”‚
â”‚   â””â”€â”€ tests/                  # æµ‹è¯•
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ test_api/
â”‚       â”œâ”€â”€ test_services/
â”‚       â””â”€â”€ test_data/
â”‚
â”œâ”€â”€ alembic/                    # æ•°æ®åº“è¿ç§»ï¼ˆå¦‚ä½¿ç”¨SQLAlchemyï¼‰
â”‚   â”œâ”€â”€ versions/
â”‚   â””â”€â”€ env.py
â”‚
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore
â”œâ”€â”€ Dockerfile                 # Dockeræ„å»ºæ–‡ä»¶
â””â”€â”€ README.md                  # åç«¯æ–‡æ¡£
```

#### 1.2 æ ¸å¿ƒæ¨¡å—è¯¦ç»†è®¾è®¡

##### 1.2.1 è‚¡ç¥¨åˆ†ææ¨¡å— (stock_service.py)

**åŠŸèƒ½èŒè´£**:
- å•è‚¡åˆ†æ
- æ‰¹é‡åˆ†æ
- å†å²è®°å½•æŸ¥è¯¢
- PDFæŠ¥å‘Šç”Ÿæˆ

**APIæ¥å£**:
```python
POST   /api/v1/stock/analyze          # å•è‚¡åˆ†æ
POST   /api/v1/stock/batch-analyze    # æ‰¹é‡åˆ†æ
GET    /api/v1/stock/history          # æŸ¥è¯¢å†å²è®°å½•
GET    /api/v1/stock/{stock_code}     # è·å–è‚¡ç¥¨ä¿¡æ¯
POST   /api/v1/stock/generate-pdf     # ç”ŸæˆPDFæŠ¥å‘Š
```

**ä¾èµ–æœåŠ¡**:
- `data_service.py` - æ•°æ®è·å–
- `stock_agents.py` - AIåˆ†æ
- `stock_db.py` - æ•°æ®æŒä¹…åŒ–

##### 1.2.2 æ™ºç­–æ¿å—æ¨¡å— (sector_service.py)

**åŠŸèƒ½èŒè´£**:
- æ¿å—ç­–ç•¥åˆ†æ
- å®šæ—¶ä»»åŠ¡ç®¡ç†
- å†å²æŠ¥å‘ŠæŸ¥è¯¢

**APIæ¥å£**:
```python
POST   /api/v1/sector/analyze         # æ¿å—åˆ†æ
GET    /api/v1/sector/schedule        # è·å–å®šæ—¶ä»»åŠ¡
POST   /api/v1/sector/schedule        # è®¾ç½®å®šæ—¶ä»»åŠ¡
DELETE /api/v1/sector/schedule        # åˆ é™¤å®šæ—¶ä»»åŠ¡
POST   /api/v1/sector/trigger         # æ‰‹åŠ¨è§¦å‘åˆ†æ
GET    /api/v1/sector/history         # å†å²æŠ¥å‘Š
POST   /api/v1/sector/generate-pdf    # ç”ŸæˆPDF
```

**ä¾èµ–æœåŠ¡**:
- `sector_data.py` - æ¿å—æ•°æ®è·å–
- `sector_agents.py` - AIåˆ†æ
- `sector_tasks.py` - å®šæ—¶ä»»åŠ¡

##### 1.2.3 æ™ºç°é¾™è™æ¨¡å— (longhubang_service.py)

**åŠŸèƒ½èŒè´£**:
- é¾™è™æ¦œæ•°æ®è·å–
- AIè¯„åˆ†æ’å
- æ‰¹é‡åˆ†æ
- å†å²æŠ¥å‘Š

**APIæ¥å£**:
```python
POST   /api/v1/longhubang/analyze     # é¾™è™æ¦œåˆ†æ
POST   /api/v1/longhubang/batch-analyze # æ‰¹é‡åˆ†æ
GET    /api/v1/longhubang/scoring     # è·å–è¯„åˆ†æ’å
GET    /api/v1/longhubang/history     # å†å²æŠ¥å‘Š
POST   /api/v1/longhubang/generate-pdf # ç”ŸæˆPDF
```

##### 1.2.4 æ™ºèƒ½ç›¯ç›˜æ¨¡å— (monitor_service.py)

**åŠŸèƒ½èŒè´£**:
- ç›‘æ§ä»»åŠ¡ç®¡ç†
- å®æ—¶ä»·æ ¼ç›‘æµ‹
- AIå†³ç­–åˆ†æ
- è‡ªåŠ¨äº¤æ˜“æ‰§è¡Œ

**APIæ¥å£**:
```python
GET    /api/v1/monitor/tasks          # è·å–ç›‘æ§ä»»åŠ¡åˆ—è¡¨
POST   /api/v1/monitor/tasks          # åˆ›å»ºç›‘æ§ä»»åŠ¡
PUT    /api/v1/monitor/tasks/{id}     # æ›´æ–°ä»»åŠ¡
DELETE /api/v1/monitor/tasks/{id}     # åˆ é™¤ä»»åŠ¡
POST   /api/v1/monitor/tasks/{id}/start   # å¯åŠ¨ä»»åŠ¡
POST   /api/v1/monitor/tasks/{id}/stop    # åœæ­¢ä»»åŠ¡
GET    /api/v1/monitor/tasks/{id}/status  # è·å–ä»»åŠ¡çŠ¶æ€
GET    /api/v1/monitor/positions      # è·å–æŒä»“
GET    /api/v1/monitor/history        # å†³ç­–å†å²
```

**WebSocketæ¥å£**:
```python
WS     /api/v1/monitor/ws/{task_id}   # å®æ—¶ä»·æ ¼æ¨é€
```

##### 1.2.5 å®æ—¶ç›‘æµ‹æ¨¡å— (realtime_service.py)

**åŠŸèƒ½èŒè´£**:
- ä»·æ ¼ç›‘æµ‹
- é€šçŸ¥è§¦å‘
- ç›‘æµ‹å†å²

**APIæ¥å£**:
```python
GET    /api/v1/realtime/monitors      # è·å–ç›‘æµ‹åˆ—è¡¨
POST   /api/v1/realtime/monitors      # æ·»åŠ ç›‘æµ‹
PUT    /api/v1/realtime/monitors/{id} # æ›´æ–°ç›‘æµ‹
DELETE /api/v1/realtime/monitors/{id} # åˆ é™¤ç›‘æµ‹
POST   /api/v1/realtime/start         # å¯åŠ¨ç›‘æµ‹æœåŠ¡
POST   /api/v1/realtime/stop          # åœæ­¢ç›‘æµ‹æœåŠ¡
GET    /api/v1/realtime/notifications # é€šçŸ¥å†å²
```

##### 1.2.6 æŒä»“åˆ†ææ¨¡å— (portfolio_service.py)

**åŠŸèƒ½èŒè´£**:
- æŒä»“ç®¡ç†
- æ‰¹é‡åˆ†æ
- å®šæ—¶åˆ†æ
- ç›‘æµ‹åŒæ­¥

**APIæ¥å£**:
```python
GET    /api/v1/portfolio/stocks       # è·å–æŒä»“åˆ—è¡¨
POST   /api/v1/portfolio/stocks       # æ·»åŠ æŒä»“
PUT    /api/v1/portfolio/stocks/{id}  # æ›´æ–°æŒä»“
DELETE /api/v1/portfolio/stocks/{id}  # åˆ é™¤æŒä»“
POST   /api/v1/portfolio/batch-analyze # æ‰¹é‡åˆ†æ
GET    /api/v1/portfolio/schedule     # è·å–å®šæ—¶é…ç½®
POST   /api/v1/portfolio/schedule     # è®¾ç½®å®šæ—¶é…ç½®
GET    /api/v1/portfolio/history      # åˆ†æå†å²
```

##### 1.2.7 é€šçŸ¥æœåŠ¡æ¨¡å— (notification_service.py)

**åŠŸèƒ½èŒè´£**:
- é‚®ä»¶é€šçŸ¥
- Webhooké€šçŸ¥
- é€šçŸ¥å†å²

**APIæ¥å£**:
```python
POST   /api/v1/notification/email     # å‘é€é‚®ä»¶
POST   /api/v1/notification/webhook   # å‘é€Webhook
GET    /api/v1/notification/history   # é€šçŸ¥å†å²
POST   /api/v1/notification/test      # æµ‹è¯•é€šçŸ¥
```

##### 1.2.8 é…ç½®ç®¡ç†æ¨¡å— (config_service.py)

**åŠŸèƒ½èŒè´£**:
- ç¯å¢ƒé…ç½®ç®¡ç†
- é…ç½®éªŒè¯
- é…ç½®æ›´æ–°

**APIæ¥å£**:
```python
GET    /api/v1/config                 # è·å–é…ç½®
PUT    /api/v1/config                 # æ›´æ–°é…ç½®
POST   /api/v1/config/validate        # éªŒè¯é…ç½®
GET    /api/v1/config/test            # æµ‹è¯•é…ç½®
```

### 2. å‰ç«¯æ¨¡å—æ‹†åˆ†

#### 2.1 é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js               # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ App.vue               # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ settings.js           # å…¨å±€é…ç½® (vue-admin-templateæ ‡å‡†)
â”‚   â”œâ”€â”€ permission.js         # è·¯ç”±æƒé™æ§åˆ¶
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                  # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ user.js           # ç”¨æˆ·API (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ stock.js          # è‚¡ç¥¨åˆ†æAPI
â”‚   â”‚   â”œâ”€â”€ sector.js         # æ™ºç­–æ¿å—API
â”‚   â”‚   â”œâ”€â”€ longhubang.js     # æ™ºç°é¾™è™API
â”‚   â”‚   â”œâ”€â”€ mainforce.js      # ä¸»åŠ›é€‰è‚¡API
â”‚   â”‚   â”œâ”€â”€ monitor.js        # æ™ºèƒ½ç›¯ç›˜API
â”‚   â”‚   â”œâ”€â”€ realtime.js       # å®æ—¶ç›‘æµ‹API
â”‚   â”‚   â”œâ”€â”€ portfolio.js      # æŒä»“åˆ†æAPI
â”‚   â”‚   â”œâ”€â”€ trading.js        # é‡åŒ–äº¤æ˜“API
â”‚   â”‚   â”œâ”€â”€ notification.js   # é€šçŸ¥æœåŠ¡API
â”‚   â”‚   â””â”€â”€ config.js         # é…ç½®ç®¡ç†API
â”‚   â”‚
â”‚   â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js          # è·¯ç”±ä¸»æ–‡ä»¶ (æ‰€æœ‰è·¯ç”±é›†ä¸­ç®¡ç†)
â”‚   â”‚                          # ä½¿ç”¨constantRouteså®šä¹‰å¸¸é‡è·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                # VuexçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.js          # Storeå…¥å£ (è‡ªåŠ¨åŠ è½½modules)
â”‚   â”‚   â”œâ”€â”€ getters.js        # å…¨å±€getters
â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚       â”œâ”€â”€ app.js        # åº”ç”¨çŠ¶æ€ (ä¾§è¾¹æ ã€è®¾å¤‡ç±»å‹ç­‰)
â”‚   â”‚       â”œâ”€â”€ user.js       # ç”¨æˆ·çŠ¶æ€ (ç™»å½•ã€ç”¨æˆ·ä¿¡æ¯)
â”‚   â”‚       â”œâ”€â”€ settings.js   # è®¾ç½®çŠ¶æ€ (å›ºå®šå¤´éƒ¨ã€ä¾§è¾¹æ Logoç­‰)
â”‚   â”‚       â”œâ”€â”€ stock.js      # è‚¡ç¥¨åˆ†æçŠ¶æ€
â”‚   â”‚       â””â”€â”€ monitor.js    # ç›‘æµ‹çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dashboard/        # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ login/            # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ 404.vue           # 404é¡µé¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stock/            # è‚¡ç¥¨åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # åˆ†æé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ single.vue    # å•è‚¡åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ batch.vue     # æ‰¹é‡åˆ†æ
â”‚   â”‚   â”‚   â””â”€â”€ history.vue   # å†å²è®°å½•
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ sector/           # æ™ºç­–æ¿å—
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # æ¿å—åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule.vue  # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ history.vue   # å†å²æŠ¥å‘Š
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ longhubang/       # æ™ºç°é¾™è™
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # é¾™è™æ¦œåˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ scoring.vue   # è¯„åˆ†æ’å
â”‚   â”‚   â”‚   â”œâ”€â”€ batch.vue     # æ‰¹é‡åˆ†æ
â”‚   â”‚   â”‚   â””â”€â”€ history.vue   # å†å²æŠ¥å‘Š
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ mainforce/        # ä¸»åŠ›é€‰è‚¡
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # é€‰è‚¡åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ batch.vue     # æ‰¹é‡åˆ†æ
â”‚   â”‚   â”‚   â””â”€â”€ history.vue   # å†å²è®°å½•
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ monitor/          # æ™ºèƒ½ç›¯ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # ç›‘æ§ä»»åŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ positions.vue # æŒä»“ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ history.vue   # å†³ç­–å†å²
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ realtime/         # å®æ—¶ç›‘æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # ç›‘æµ‹ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ notifications.vue # é€šçŸ¥å†å²
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ portfolio/        # æŒä»“åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue     # æŒä»“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ analyze.vue   # æ‰¹é‡åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule.vue  # å®šæ—¶é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ history.vue   # åˆ†æå†å²
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ trading/          # é‡åŒ–äº¤æ˜“
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config/           # ç¯å¢ƒé…ç½®
â”‚   â”‚       â”œâ”€â”€ index.vue     # é…ç½®ç®¡ç†
â”‚   â”‚       â””â”€â”€ notification.vue # é€šçŸ¥é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/               # å¸ƒå±€ç»„ä»¶ (vue-admin-templateæ ‡å‡†)
â”‚   â”‚   â”œâ”€â”€ index.vue         # ä¸»å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ components/       # å¸ƒå±€å­ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.vue    # å¯¼èˆªæ 
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar/      # ä¾§è¾¹æ 
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Logo.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SidebarItem.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Item.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Link.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FixiOSBug.js
â”‚   â”‚   â”‚   â”œâ”€â”€ AppMain.vue   # ä¸»å†…å®¹åŒº
â”‚   â”‚   â”‚   â””â”€â”€ Breadcrumb/   # é¢åŒ…å±‘
â”‚   â”‚   â”‚       â””â”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ mixin/
â”‚   â”‚       â””â”€â”€ ResizeHandler.js # å“åº”å¼å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ components/           # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Hamburger/        # æ±‰å ¡èœå• (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ Breadcrumb/       # é¢åŒ…å±‘ (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ SvgIcon/          # SVGå›¾æ ‡ (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ StockCard/        # è‚¡ç¥¨å¡ç‰‡ (å¾…å¼€å‘)
â”‚   â”‚   â”œâ”€â”€ AnalysisResult/   # åˆ†æç»“æœå±•ç¤º (å¾…å¼€å‘)
â”‚   â”‚   â”œâ”€â”€ Chart/            # å›¾è¡¨ç»„ä»¶ (å¾…å¼€å‘)
â”‚   â”‚   â”œâ”€â”€ MonitorCard/      # ç›‘æµ‹å¡ç‰‡ (å¾…å¼€å‘)
â”‚   â”‚   â””â”€â”€ PDFDownload/      # PDFä¸‹è½½ (å¾…å¼€å‘)
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.js        # Axiosè¯·æ±‚å°è£… (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ auth.js           # Tokenè®¤è¯å·¥å…· (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ validate.js       # è¡¨å•éªŒè¯ (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ get-page-title.js # é¡µé¢æ ‡é¢˜ (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ index.js          # å·¥å…·å‡½æ•°é›†åˆ (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚   â”œâ”€â”€ format.js         # æ•°æ®æ ¼å¼åŒ– (å¾…å¼€å‘)
â”‚   â”‚   â””â”€â”€ websocket.js      # WebSocketå°è£… (å¾…å¼€å‘)
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/               # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.scss        # å…¨å±€æ ·å¼å…¥å£
â”‚   â”‚   â”œâ”€â”€ variables.scss    # SCSSå˜é‡
â”‚   â”‚   â”œâ”€â”€ mixin.scss        # SCSSæ··å…¥
â”‚   â”‚   â”œâ”€â”€ sidebar.scss      # ä¾§è¾¹æ æ ·å¼
â”‚   â”‚   â”œâ”€â”€ transition.scss   # è¿‡æ¸¡åŠ¨ç”»
â”‚   â”‚   â””â”€â”€ element-ui.scss   # Element UIæ ·å¼è¦†ç›–
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/               # èµ„æºæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ 404_images/       # 404å›¾ç‰‡ (æ¨¡æ¿è‡ªå¸¦)
â”‚   â”‚
â”‚   â””â”€â”€ icons/                # SVGå›¾æ ‡ (vue-admin-templateæ ‡å‡†)
â”‚       â”œâ”€â”€ index.js          # å›¾æ ‡æ³¨å†Œ
â”‚       â”œâ”€â”€ svg/              # SVGæ–‡ä»¶ç›®å½•
â”‚       â””â”€â”€ svgo.yml          # SVGä¼˜åŒ–é…ç½®
â”‚
â”œâ”€â”€ mock/                     # Mockæ•°æ® (å¼€å‘ç¯å¢ƒ)
â”‚   â””â”€â”€ mock-server.js
â”‚
â”œâ”€â”€ build/                    # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .env.development          # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.production           # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ vue.config.js             # Vue CLIé…ç½®
â”œâ”€â”€ package.json              # ä¾èµ–ç®¡ç†
â”œâ”€â”€ babel.config.js           # Babelé…ç½®
â”œâ”€â”€ .eslintrc.js              # ESLinté…ç½®
â”œâ”€â”€ jest.config.js            # Jestæµ‹è¯•é…ç½®
â”œâ”€â”€ jsconfig.json             # JSé…ç½®
â””â”€â”€ README.md                 # å‰ç«¯æ–‡æ¡£
```

#### 2.2 æ ¸å¿ƒé¡µé¢ç»„ä»¶è®¾è®¡

##### 2.2.1 è‚¡ç¥¨åˆ†æé¡µé¢ (stock/index.vue)

**åŠŸèƒ½æ¨¡å—**:
- å•è‚¡åˆ†æè¡¨å•
- æ‰¹é‡åˆ†æè¡¨å•
- åˆ†æç»“æœå±•ç¤ºï¼ˆå¡ç‰‡/è¡¨æ ¼ï¼‰
- å†å²è®°å½•æŸ¥è¯¢
- PDFå¯¼å‡º

**ç»„ä»¶ä¾èµ–**:
- `StockCard` - è‚¡ç¥¨ä¿¡æ¯å¡ç‰‡
- `AnalysisResult` - åˆ†æç»“æœå±•ç¤º
- `Chart` - Kçº¿å›¾/æŠ€æœ¯æŒ‡æ ‡å›¾

##### 2.2.2 æ™ºç­–æ¿å—é¡µé¢ (sector/index.vue)

**åŠŸèƒ½æ¨¡å—**:
- æ¿å—åˆ†æè§¦å‘
- åˆ†æç»“æœå±•ç¤ºï¼ˆå¤šç©º/è½®åŠ¨/çƒ­åº¦ï¼‰
- å®šæ—¶ä»»åŠ¡é…ç½®
- å†å²æŠ¥å‘ŠæŸ¥è¯¢

**ç»„ä»¶ä¾èµ–**:
- `SectorChart` - æ¿å—å¯è§†åŒ–å›¾è¡¨
- `ScheduleConfig` - å®šæ—¶ä»»åŠ¡é…ç½®ç»„ä»¶

##### 2.2.3 æ™ºèƒ½ç›¯ç›˜é¡µé¢ (monitor/index.vue)

**åŠŸèƒ½æ¨¡å—**:
- ç›‘æ§ä»»åŠ¡åˆ—è¡¨
- ä»»åŠ¡åˆ›å»º/ç¼–è¾‘
- å®æ—¶ä»·æ ¼æ˜¾ç¤ºï¼ˆWebSocketï¼‰
- æŒä»“ç®¡ç†
- å†³ç­–å†å²

**ç»„ä»¶ä¾èµ–**:
- `MonitorCard` - ç›‘æ§ä»»åŠ¡å¡ç‰‡
- `PositionTable` - æŒä»“è¡¨æ ¼
- `RealtimeChart` - å®æ—¶ä»·æ ¼å›¾è¡¨

##### 2.2.4 å®æ—¶ç›‘æµ‹é¡µé¢ (realtime/index.vue)

**åŠŸèƒ½æ¨¡å—**:
- ç›‘æµ‹åˆ—è¡¨ç®¡ç†
- æ·»åŠ /ç¼–è¾‘ç›‘æµ‹
- ç›‘æµ‹çŠ¶æ€æ˜¾ç¤º
- é€šçŸ¥å†å²

**ç»„ä»¶ä¾èµ–**:
- `MonitorCard` - ç›‘æµ‹å¡ç‰‡
- `NotificationList` - é€šçŸ¥åˆ—è¡¨

---

## ğŸ”Œ APIæ¥å£è®¾è®¡è§„èŒƒ

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": "2024-12-XX 12:00:00"
}
```

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "code": 400,
  "message": "é”™è¯¯æè¿°",
  "error": "è¯¦ç»†é”™è¯¯ä¿¡æ¯",
  "timestamp": "2024-12-XX 12:00:00"
}
```

### åˆ†é¡µå“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "items": [],
    "total": 100,
    "page": 1,
    "page_size": 20,
    "pages": 5
  }
}
```

### è®¤è¯æ–¹å¼

**JWT Tokenè®¤è¯**:
```
Authorization: Bearer <token>
```

### APIç‰ˆæœ¬æ§åˆ¶

- è·¯å¾„ç‰ˆæœ¬: `/api/v1/`
- æœªæ¥å‡çº§: `/api/v2/`

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“è¿ç§»ç­–ç•¥

**æ–¹æ¡ˆä¸€**: ä¿æŒSQLiteï¼Œä½¿ç”¨Peewee ORMï¼ˆå…¼å®¹ç°æœ‰ï¼‰
**æ–¹æ¡ˆäºŒ**: è¿ç§»åˆ°PostgreSQLï¼Œä½¿ç”¨SQLAlchemy ORMï¼ˆæ¨èï¼‰

### æ ¸å¿ƒæ•°æ®è¡¨

#### 1. è‚¡ç¥¨åˆ†æè¡¨ (stock_analysis)
```sql
CREATE TABLE stock_analysis (
    id INTEGER PRIMARY KEY,
    stock_code VARCHAR(20) NOT NULL,
    stock_name VARCHAR(100),
    analysis_type VARCHAR(50),  -- single/batch
    analysis_result TEXT,        -- JSONæ ¼å¼
    rating VARCHAR(20),          -- ä¹°å…¥/æŒæœ‰/å–å‡º
    confidence_level FLOAT,
    entry_range VARCHAR(50),
    take_profit FLOAT,
    stop_loss FLOAT,
    target_price FLOAT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. ç›‘æµ‹ä»»åŠ¡è¡¨ (monitor_tasks)
```sql
CREATE TABLE monitor_tasks (
    id INTEGER PRIMARY KEY,
    task_name VARCHAR(100),
    stock_code VARCHAR(20) NOT NULL,
    stock_name VARCHAR(100),
    status VARCHAR(20),          -- running/stopped
    check_interval INTEGER,      -- ç§’
    auto_trade BOOLEAN,
    trading_hours_only BOOLEAN,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

#### 3. æŒä»“è¡¨ (portfolio_stocks)
```sql
CREATE TABLE portfolio_stocks (
    id INTEGER PRIMARY KEY,
    stock_code VARCHAR(20) NOT NULL,
    stock_name VARCHAR(100),
    cost_price FLOAT,
    quantity INTEGER,
    notes TEXT,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

#### 4. å®šæ—¶ä»»åŠ¡è¡¨ (scheduled_tasks)
```sql
CREATE TABLE scheduled_tasks (
    id INTEGER PRIMARY KEY,
    task_type VARCHAR(50),       -- sector/portfolio
    schedule_time VARCHAR(20),   -- HH:MMæ ¼å¼
    enabled BOOLEAN,
    last_run_at TIMESTAMP,
    next_run_at TIMESTAMP,
    created_at TIMESTAMP
);
```

---

## ğŸš€ æ‹†åˆ†å®æ–½æ­¥éª¤

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„æ­å»º (1-2å‘¨)

#### 1.1 åç«¯åŸºç¡€æ¡†æ¶
- [ ] åˆ›å»ºFastAPIé¡¹ç›®ç»“æ„
- [ ] é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆSQLite/PostgreSQLï¼‰
- [ ] å®ç°åŸºç¡€è®¤è¯æˆæƒï¼ˆJWTï¼‰
- [ ] é…ç½®CORSè·¨åŸŸ
- [ ] å®ç°ç»Ÿä¸€å¼‚å¸¸å¤„ç†
- [ ] é…ç½®æ—¥å¿—ç³»ç»Ÿ
- [ ] ç¼–å†™APIæ–‡æ¡£ï¼ˆSwaggerï¼‰

#### 1.2 å‰ç«¯åŸºç¡€æ¡†æ¶
- [x] åˆå§‹åŒ–Vue Admin Templateé¡¹ç›®
- [x] é…ç½®Axiosè¯·æ±‚æ‹¦æˆªå™¨ (utils/request.js)
- [x] å®ç°è·¯ç”±é…ç½® (router/index.js)
- [x] é…ç½®VuexçŠ¶æ€ç®¡ç† (store/index.jsè‡ªåŠ¨åŠ è½½modules)
- [x] å®ç°ç™»å½•è®¤è¯ (views/login, store/modules/user.js)
- [x] é…ç½®ç¯å¢ƒå˜é‡ (.env.development, .env.production)
- [x] åˆ›å»ºä¸šåŠ¡æ¨¡å—APIæ¥å£æ–‡ä»¶
- [x] åˆ›å»ºä¸šåŠ¡æ¨¡å—è·¯ç”±é…ç½®
- [x] åˆ›å»ºä¸šåŠ¡æ¨¡å—é¡µé¢ç»„ä»¶éª¨æ¶

#### 1.3 å¼€å‘ç¯å¢ƒæ­å»º
- [ ] é…ç½®Dockerå¼€å‘ç¯å¢ƒ
- [ ] é…ç½®å‰åç«¯è”è°ƒ
- [ ] é…ç½®çƒ­æ›´æ–°
- [ ] ç¼–å†™å¼€å‘æ–‡æ¡£

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒæ¨¡å—è¿ç§» (3-4å‘¨)

#### 2.1 æ•°æ®è®¿é—®å±‚è¿ç§»
- [ ] è¿ç§»æ•°æ®è·å–æ¨¡å—ï¼ˆstock_data.pyç­‰ï¼‰
- [ ] è¿ç§»æ•°æ®åº“æ“ä½œï¼ˆdbæ¨¡å—ï¼‰
- [ ] å®ç°æ•°æ®æºç®¡ç†å™¨
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶

#### 2.2 ä¸šåŠ¡æœåŠ¡å±‚è¿ç§»
- [ ] è¿ç§»è‚¡ç¥¨åˆ†ææœåŠ¡
- [ ] è¿ç§»æ™ºç­–æ¿å—æœåŠ¡
- [ ] è¿ç§»æ™ºç°é¾™è™æœåŠ¡
- [ ] è¿ç§»ä¸»åŠ›é€‰è‚¡æœåŠ¡
- [ ] è¿ç§»æ™ºèƒ½ç›¯ç›˜æœåŠ¡
- [ ] è¿ç§»å®æ—¶ç›‘æµ‹æœåŠ¡
- [ ] è¿ç§»æŒä»“åˆ†ææœåŠ¡
- [ ] è¿ç§»é€šçŸ¥æœåŠ¡

#### 2.3 AIæ™ºèƒ½ä½“è¿ç§»
- [ ] è¿ç§»DeepSeekå®¢æˆ·ç«¯
- [ ] è¿ç§»è‚¡ç¥¨åˆ†ææ™ºèƒ½ä½“
- [ ] è¿ç§»æ¿å—åˆ†ææ™ºèƒ½ä½“
- [ ] è¿ç§»é¾™è™æ¦œæ™ºèƒ½ä½“
- [ ] è¿ç§»ä¸»åŠ›é€‰è‚¡æ™ºèƒ½ä½“

### é˜¶æ®µä¸‰ï¼šAPIæ¥å£å¼€å‘ (2-3å‘¨)

#### 3.1 è‚¡ç¥¨åˆ†æAPI
- [ ] å•è‚¡åˆ†ææ¥å£
- [ ] æ‰¹é‡åˆ†ææ¥å£
- [ ] å†å²è®°å½•æ¥å£
- [ ] PDFç”Ÿæˆæ¥å£

#### 3.2 æ™ºç­–æ¿å—API
- [ ] æ¿å—åˆ†ææ¥å£
- [ ] å®šæ—¶ä»»åŠ¡æ¥å£
- [ ] å†å²æŠ¥å‘Šæ¥å£

#### 3.3 ç›‘æµ‹ç›¸å…³API
- [ ] æ™ºèƒ½ç›¯ç›˜ä»»åŠ¡æ¥å£
- [ ] å®æ—¶ç›‘æµ‹æ¥å£
- [ ] WebSocketå®æ—¶æ¨é€

#### 3.4 å…¶ä»–åŠŸèƒ½API
- [ ] æŒä»“åˆ†ææ¥å£
- [ ] é€šçŸ¥æœåŠ¡æ¥å£
- [ ] é…ç½®ç®¡ç†æ¥å£

### é˜¶æ®µå››ï¼šå‰ç«¯é¡µé¢å¼€å‘ (3-4å‘¨)

#### 4.1 åŸºç¡€é¡µé¢
- [ ] ç™»å½•é¡µé¢
- [ ] ä»ªè¡¨ç›˜é¡µé¢
- [ ] å¸ƒå±€ç»„ä»¶

#### 4.2 è‚¡ç¥¨åˆ†æé¡µé¢
- [ ] å•è‚¡åˆ†æé¡µé¢
- [ ] æ‰¹é‡åˆ†æé¡µé¢
- [ ] å†å²è®°å½•é¡µé¢
- [ ] ç»“æœå±•ç¤ºç»„ä»¶

#### 4.3 æ™ºç­–æ¿å—é¡µé¢
- [ ] æ¿å—åˆ†æé¡µé¢
- [ ] å®šæ—¶ä»»åŠ¡é…ç½®
- [ ] å†å²æŠ¥å‘Šé¡µé¢

#### 4.4 ç›‘æµ‹ç›¸å…³é¡µé¢
- [ ] æ™ºèƒ½ç›¯ç›˜é¡µé¢
- [ ] å®æ—¶ç›‘æµ‹é¡µé¢
- [ ] æŒä»“ç®¡ç†é¡µé¢

#### 4.5 å…¶ä»–åŠŸèƒ½é¡µé¢
- [ ] æ™ºç°é¾™è™é¡µé¢
- [ ] ä¸»åŠ›é€‰è‚¡é¡µé¢
- [ ] é…ç½®ç®¡ç†é¡µé¢

### é˜¶æ®µäº”ï¼šåå°ä»»åŠ¡ç³»ç»Ÿ (1-2å‘¨)

#### 5.1 å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ
- [ ] é›†æˆCelery
- [ ] å®ç°æ¿å—å®šæ—¶åˆ†æä»»åŠ¡
- [ ] å®ç°æŒä»“å®šæ—¶åˆ†æä»»åŠ¡
- [ ] å®ç°ç›‘æµ‹åå°ä»»åŠ¡

#### 5.2 ä»»åŠ¡ç®¡ç†
- [ ] ä»»åŠ¡çŠ¶æ€ç›‘æ§
- [ ] ä»»åŠ¡æ—¥å¿—è®°å½•
- [ ] ä»»åŠ¡å¤±è´¥é‡è¯•

### é˜¶æ®µå…­ï¼šæµ‹è¯•ä¸ä¼˜åŒ– (2å‘¨)

#### 6.1 åŠŸèƒ½æµ‹è¯•
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] APIæ¥å£æµ‹è¯•
- [ ] å‰ç«¯åŠŸèƒ½æµ‹è¯•

#### 6.2 æ€§èƒ½ä¼˜åŒ–
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] APIå“åº”æ—¶é—´ä¼˜åŒ–
- [ ] å‰ç«¯åŠ è½½ä¼˜åŒ–
- [ ] ç¼“å­˜ç­–ç•¥ä¼˜åŒ–

#### 6.3 å®‰å…¨åŠ å›º
- [ ] APIå®‰å…¨éªŒè¯
- [ ] æ•°æ®åŠ å¯†
- [ ] é˜²SQLæ³¨å…¥
- [ ] XSSé˜²æŠ¤

### é˜¶æ®µä¸ƒï¼šéƒ¨ç½²ä¸Šçº¿ (1å‘¨)

#### 7.1 ç”Ÿäº§ç¯å¢ƒé…ç½®
- [ ] Dockeré•œåƒæ„å»º
- [ ] ç¯å¢ƒå˜é‡é…ç½®
- [ ] æ•°æ®åº“è¿ç§»
- [ ] Nginxåå‘ä»£ç†é…ç½®

#### 7.2 éƒ¨ç½²æ–‡æ¡£
- [ ] éƒ¨ç½²æµç¨‹æ–‡æ¡£
- [ ] è¿ç»´æ‰‹å†Œ
- [ ] æ•…éšœæ’æŸ¥æŒ‡å—

---

## ğŸ“ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. åç«¯å…³é”®æŠ€æœ¯å®ç°

#### 1.1 FastAPIåº”ç”¨åˆå§‹åŒ–

```python
# app/main.py
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from app.api.v1.router import api_router
from app.core.config import settings

app = FastAPI(
    title="AIè‚¡ç¥¨åˆ†æç³»ç»ŸAPI",
    version="1.0.0",
    docs_url="/api/docs",
    redoc_url="/api/redoc"
)

# CORSé…ç½®
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.CORS_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# æ³¨å†Œè·¯ç”±
app.include_router(api_router, prefix="/api/v1")
```

#### 1.2 å¼‚æ­¥æ•°æ®è·å–

```python
# app/services/data_service.py
import asyncio
import aiohttp
from typing import Dict, Any

async def fetch_stock_data(stock_code: str) -> Dict[str, Any]:
    """å¼‚æ­¥è·å–è‚¡ç¥¨æ•°æ®"""
    async with aiohttp.ClientSession() as session:
        # å¹¶è¡Œè·å–å¤šä¸ªæ•°æ®æº
        tasks = [
            fetch_realtime_quote(session, stock_code),
            fetch_kline_data(session, stock_code),
            fetch_technical_indicators(session, stock_code)
        ]
        results = await asyncio.gather(*tasks)
        return combine_results(results)
```

#### 1.3 WebSocketå®æ—¶æ¨é€

```python
# app/api/websocket.py
from fastapi import WebSocket
import json

class ConnectionManager:
    def __init__(self):
        self.active_connections: List[WebSocket] = []

    async def connect(self, websocket: WebSocket):
        await websocket.accept()
        self.active_connections.append(websocket)

    async def broadcast(self, message: dict):
        for connection in self.active_connections:
            await connection.send_json(message)

@app.websocket("/api/v1/monitor/ws/{task_id}")
async def websocket_endpoint(websocket: WebSocket, task_id: int):
    await manager.connect(websocket)
    # å®æ—¶æ¨é€ä»·æ ¼æ•°æ®
    while True:
        data = await get_realtime_price(task_id)
        await websocket.send_json(data)
        await asyncio.sleep(1)
```

### 2. å‰ç«¯å…³é”®æŠ€æœ¯å®ç°

#### 2.1 APIè¯·æ±‚å°è£…

vue-admin-templateå·²æä¾›å®Œæ•´çš„Axioså°è£…ï¼Œä½äº `src/utils/request.js`ï¼š

```javascript
// src/utils/request.js (vue-admin-templateæ ‡å‡†å®ç°)
import axios from 'axios'
import { MessageBox, Message } from 'element-ui'
import store from '@/store'
import { getToken } from '@/utils/auth'

const service = axios.create({
  baseURL: process.env.VUE_APP_BASE_API,
  timeout: 5000
})

// è¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨æ·»åŠ Token
service.interceptors.request.use(
  config => {
    if (store.getters.token) {
      config.headers['X-Token'] = getToken()
    }
    return config
  },
  error => {
    return Promise.reject(error)
  }
)

// å“åº”æ‹¦æˆªå™¨ - ç»Ÿä¸€é”™è¯¯å¤„ç†
service.interceptors.response.use(
  response => {
    const res = response.data
    if (res.code !== 20000) {
      Message.error(res.message || 'Error')
      // Tokenè¿‡æœŸå¤„ç†
      if (res.code === 50008 || res.code === 50012 || res.code === 50014) {
        MessageBox.confirm('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•', 'ç¡®è®¤ç™»å‡º', {
          confirmButtonText: 'é‡æ–°ç™»å½•',
          cancelButtonText: 'å–æ¶ˆ',
          type: 'warning'
        }).then(() => {
          store.dispatch('user/resetToken').then(() => {
            location.reload()
          })
        })
      }
      return Promise.reject(new Error(res.message || 'Error'))
    } else {
      return res
    }
  },
  error => {
    Message.error(error.message)
    return Promise.reject(error)
  }
)

export default service
```

**æ³¨æ„**: éœ€è¦æ ¹æ®åç«¯APIå“åº”æ ¼å¼è°ƒæ•´å“åº”æ‹¦æˆªå™¨ä¸­çš„ `res.code !== 20000` åˆ¤æ–­é€»è¾‘ã€‚

#### 2.2 WebSocketè¿æ¥

WebSocketå°è£…å·¥å…· (å¾…å¼€å‘ï¼Œä½äº `src/utils/websocket.js`)ï¼š

```javascript
// src/utils/websocket.js
class WebSocketClient {
  constructor(url) {
    this.url = url
    this.ws = null
    this.reconnectTimer = null
    this.reconnectAttempts = 0
    this.maxReconnectAttempts = 5
  }

  connect() {
    this.ws = new WebSocket(this.url)
    
    this.ws.onopen = () => {
      console.log('WebSocket connected')
      this.reconnectAttempts = 0
      this.onOpen && this.onOpen()
    }

    this.ws.onmessage = (event) => {
      const data = JSON.parse(event.data)
      this.onMessage && this.onMessage(data)
    }

    this.ws.onerror = (error) => {
      console.error('WebSocket error:', error)
      this.onError && this.onError(error)
    }

    this.ws.onclose = () => {
      console.log('WebSocket closed')
      this.reconnect()
    }
  }

  reconnect() {
    if (this.reconnectAttempts < this.maxReconnectAttempts) {
      this.reconnectAttempts++
      this.reconnectTimer = setTimeout(() => {
        console.log(`Reconnecting... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`)
        this.connect()
      }, 3000)
    } else {
      console.error('Max reconnect attempts reached')
    }
  }

  send(data) {
    if (this.ws && this.ws.readyState === WebSocket.OPEN) {
      this.ws.send(JSON.stringify(data))
    }
  }

  close() {
    if (this.reconnectTimer) {
      clearTimeout(this.reconnectTimer)
    }
    if (this.ws) {
      this.ws.close()
    }
  }
}

export default WebSocketClient
```

**ä½¿ç”¨ç¤ºä¾‹** (åœ¨ç›‘æ§é¡µé¢ä¸­):
```javascript
import WebSocketClient from '@/utils/websocket'

const ws = new WebSocketClient('ws://localhost:8000/api/v1/monitor/ws/1')
ws.onMessage = (data) => {
  // å¤„ç†å®æ—¶ä»·æ ¼æ•°æ®
  console.log('Price update:', data)
}
ws.connect()
```

#### 2.3 å›¾è¡¨ç»„ä»¶å°è£…

```vue
<!-- src/components/Chart/KLineChart.vue -->
<template>
  <div ref="chartContainer" style="width: 100%; height: 400px;"></div>
</template>

<script>
import * as echarts from 'echarts'

export default {
  name: 'KLineChart',
  props: {
    data: {
      type: Array,
      required: true
    }
  },
  mounted() {
    this.initChart()
  },
  watch: {
    data: {
      handler() {
        this.updateChart()
      },
      deep: true
    }
  },
  methods: {
    initChart() {
      this.chart = echarts.init(this.$refs.chartContainer)
      this.updateChart()
    },
    updateChart() {
      const option = {
        // EChartsé…ç½®
      }
      this.chart.setOption(option)
    }
  },
  beforeDestroy() {
    if (this.chart) {
      this.chart.dispose()
    }
  }
}
</script>
```

---

## ğŸ”’ å®‰å…¨è®¾è®¡

### 1. è®¤è¯æˆæƒ

- **JWT Token**: ç”¨æˆ·ç™»å½•åè·å–Tokenï¼Œåç»­è¯·æ±‚æºå¸¦Token
- **Tokenåˆ·æ–°**: Tokenè¿‡æœŸå‰è‡ªåŠ¨åˆ·æ–°
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰

### 2. æ•°æ®å®‰å…¨

- **è¾“å…¥éªŒè¯**: ä½¿ç”¨Pydanticè¿›è¡Œæ•°æ®éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨ORMï¼Œé¿å…åŸç”ŸSQL
- **XSSé˜²æŠ¤**: å‰ç«¯æ•°æ®è½¬ä¹‰
- **CSRFé˜²æŠ¤**: TokenéªŒè¯

### 3. APIå®‰å…¨

- **é™æµ**: ä½¿ç”¨Rediså®ç°APIé™æµ
- **HTTPS**: ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶HTTPS
- **CORS**: é…ç½®å…è®¸çš„æº

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. åç«¯ä¼˜åŒ–

- **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨FastAPIå¼‚æ­¥ç‰¹æ€§
- **æ•°æ®åº“è¿æ¥æ± **: é…ç½®è¿æ¥æ± 
- **ç¼“å­˜ç­–ç•¥**: Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- **ä»»åŠ¡é˜Ÿåˆ—**: Celeryå¤„ç†è€—æ—¶ä»»åŠ¡

### 2. å‰ç«¯ä¼˜åŒ–

- **ä»£ç åˆ†å‰²**: è·¯ç”±æ‡’åŠ è½½
- **èµ„æºå‹ç¼©**: Gzipå‹ç¼©
- **CDNåŠ é€Ÿ**: é™æ€èµ„æºCDN
- **è™šæ‹Ÿæ»šåŠ¨**: å¤§æ•°æ®åˆ—è¡¨ä¼˜åŒ–

### 3. æ•°æ®åº“ä¼˜åŒ–

- **ç´¢å¼•ä¼˜åŒ–**: ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- **æŸ¥è¯¢ä¼˜åŒ–**: é¿å…N+1æŸ¥è¯¢
- **åˆ†é¡µæŸ¥è¯¢**: å¤§æ•°æ®é‡åˆ†é¡µ

---

## ğŸ³ éƒ¨ç½²æ–¹æ¡ˆ

### Docker Composeé…ç½®

```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/stockdb
      - REDIS_URL=redis://redis:6379
    depends_on:
      - db
      - redis
    volumes:
      - ./backend:/app
      - ./data:/app/data

  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    volumes:
      - ./frontend/dist:/usr/share/nginx/html

  db:
    image: postgres:14
    environment:
      - POSTGRES_DB=stockdb
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

  celery:
    build: ./backend
    command: celery -A app.tasks.celery_app worker --loglevel=info
    depends_on:
      - db
      - redis
    volumes:
      - ./backend:/app

volumes:
  postgres_data:
  redis_data:
```

---

## ğŸ“š å¼€å‘è§„èŒƒ

### 1. ä»£ç è§„èŒƒ

- **Python**: éµå¾ªPEP 8ï¼Œä½¿ç”¨Blackæ ¼å¼åŒ–
- **JavaScript**: éµå¾ªESLintè§„åˆ™
- **Vue**: éµå¾ªVueé£æ ¼æŒ‡å—

### 2. Gitå·¥ä½œæµ

- **åˆ†æ”¯ç­–ç•¥**: main/masterï¼ˆç”Ÿäº§ï¼‰ã€developï¼ˆå¼€å‘ï¼‰ã€feature/*ï¼ˆåŠŸèƒ½ï¼‰
- **æäº¤è§„èŒƒ**: ä½¿ç”¨Conventional Commits
- **ä»£ç å®¡æŸ¥**: PRå¿…é¡»ç»è¿‡å®¡æŸ¥

### 3. æ–‡æ¡£è§„èŒƒ

- **APIæ–‡æ¡£**: ä½¿ç”¨FastAPIè‡ªåŠ¨ç”Ÿæˆ
- **ä»£ç æ³¨é‡Š**: å…³é”®å‡½æ•°å¿…é¡»æ³¨é‡Š
- **README**: æ¯ä¸ªæ¨¡å—å¿…é¡»æœ‰README

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] æ‰€æœ‰ç°æœ‰åŠŸèƒ½å‡å·²è¿ç§»
- [ ] æ–°åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ•°æ®ä¸€è‡´æ€§éªŒè¯é€šè¿‡

### æ€§èƒ½æŒ‡æ ‡
- [ ] APIå“åº”æ—¶é—´ < 500msï¼ˆ95%ï¼‰
- [ ] å‰ç«¯é¦–å±åŠ è½½ < 2s
- [ ] æ”¯æŒå¹¶å‘ç”¨æˆ·æ•° > 100

### ç¨³å®šæ€§
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] 7x24å°æ—¶ç¨³å®šè¿è¡Œ

---

## ğŸ“… æ—¶é—´è§„åˆ’

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | è´Ÿè´£äºº |
|------|------|----------|--------|
| é˜¶æ®µä¸€ | åŸºç¡€æ¶æ„æ­å»º | 1-2å‘¨ | åç«¯+å‰ç«¯ |
| é˜¶æ®µäºŒ | æ ¸å¿ƒæ¨¡å—è¿ç§» | 3-4å‘¨ | åç«¯ |
| é˜¶æ®µä¸‰ | APIæ¥å£å¼€å‘ | 2-3å‘¨ | åç«¯ |
| é˜¶æ®µå›› | å‰ç«¯é¡µé¢å¼€å‘ | 3-4å‘¨ | å‰ç«¯ |
| é˜¶æ®µäº” | åå°ä»»åŠ¡ç³»ç»Ÿ | 1-2å‘¨ | åç«¯ |
| é˜¶æ®µå…­ | æµ‹è¯•ä¸ä¼˜åŒ– | 2å‘¨ | å…¨æ ˆ |
| é˜¶æ®µä¸ƒ | éƒ¨ç½²ä¸Šçº¿ | 1å‘¨ | è¿ç»´ |

**æ€»è®¡**: 13-18å‘¨ï¼ˆçº¦3-4.5ä¸ªæœˆï¼‰

---

## ğŸ¯ åç»­ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸä¼˜åŒ–ï¼ˆ3ä¸ªæœˆå†…ï¼‰
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
- [ ] æ—¥å¿—åˆ†æç³»ç»Ÿ
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•å®Œå–„

### ä¸­æœŸä¼˜åŒ–ï¼ˆ6ä¸ªæœˆå†…ï¼‰
- [ ] å¾®æœåŠ¡æ¶æ„æ”¹é€ 
- [ ] æ¶ˆæ¯é˜Ÿåˆ—ä¼˜åŒ–
- [ ] æ•°æ®åº“è¯»å†™åˆ†ç¦»
- [ ] CDNåŠ é€Ÿ

### é•¿æœŸä¼˜åŒ–ï¼ˆ1å¹´å†…ï¼‰
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] å›½é™…åŒ–æ”¯æŒ
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] AIæ¨¡å‹æœ¬åœ°åŒ–éƒ¨ç½²

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®è´Ÿè´£äººã€‚

---

**æ–‡æ¡£ç»“æŸ**

