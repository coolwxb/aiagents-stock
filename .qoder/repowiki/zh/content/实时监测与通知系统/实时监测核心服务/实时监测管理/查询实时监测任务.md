# æŸ¥è¯¢å®æ—¶ç›‘æµ‹ä»»åŠ¡

<cite>
**æœ¬æ–‡å¼•ç”¨çš„æ–‡ä»¶**
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py)
- [backend/app/api/v1/router.py](file://backend/app/api/v1/router.py)
- [backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py)
- [backend/app/services/monitor_service.py](file://backend/app/services/monitor_service.py)
- [backend/app/models/monitor.py](file://backend/app/models/monitor.py)
- [backend/app/schemas/monitor.py](file://backend/app/schemas/monitor.py)
- [backend/app/api/response.py](file://backend/app/api/response.py)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue)
- [frontend/src/api/monitor.js](file://frontend/src/api/monitor.js)
- [frontend/src/api/realtime.js](file://frontend/src/api/realtime.js)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ€»è§ˆ](#æ¶æ„æ€»è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒé‡](#æ€§èƒ½è€ƒé‡)
8. [æ•…éšœæ’æŸ¥æŒ‡å—](#æ•…éšœæ’æŸ¥æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)

## ç®€ä»‹
æœ¬ç« èŠ‚èšç„¦â€œæŸ¥è¯¢å®æ—¶ç›‘æµ‹ä»»åŠ¡â€çš„åŠŸèƒ½å®ç°ï¼Œè¦†ç›–ï¼š
- å‰ç«¯ä»»åŠ¡åˆ—è¡¨çš„æ¸²æŸ“é€»è¾‘ã€åˆ†é¡µä¸ç­›é€‰æœºåˆ¶
- åç«¯å¦‚ä½•é€šè¿‡APIæä¾›ä»»åŠ¡åˆ—è¡¨ã€å“åº”æ•°æ®ç»“æ„ä¸çŠ¶æ€å­—æ®µå«ä¹‰
- ç»“åˆå‰ç«¯ index.vue ä¸­çš„è¡¨æ ¼ç»„ä»¶ï¼Œè¯´æ˜å¦‚ä½•åŠ¨æ€å±•ç¤ºä»»åŠ¡çŠ¶æ€æ ‡ç­¾ã€æ›´æ–°æ—¶é—´æç¤ºï¼Œå¹¶å®ç°åŸºäºå…³é”®è¯çš„è‚¡ç¥¨ä»£ç å¿«é€Ÿæœç´¢

å½“å‰ä»“åº“ä¸­ï¼Œå®æ—¶ç›‘æµ‹ä»»åŠ¡çš„æŸ¥è¯¢æ¥å£ç”±ä¸¤ä¸ªAPIæ¨¡å—æä¾›ï¼š
- /api/v1/realtimeï¼šæä¾›å®æ—¶ç›‘æµ‹ç›¸å…³æ¥å£ï¼ˆå«ä»»åŠ¡åˆ—è¡¨ï¼‰ï¼Œä½†å…¶æœåŠ¡å±‚å®ç°å°šä¸ºå ä½
- /api/v1/monitorï¼šæä¾›æ™ºèƒ½ç›¯ç›˜ä»»åŠ¡åˆ—è¡¨æ¥å£ï¼ŒæœåŠ¡å±‚å·²å®Œæ•´å®ç°

å› æ­¤ï¼Œæœ¬æ–‡ä»¥ /api/v1/monitor/tasks ä¸ºä¸»è¦å‚è€ƒï¼ŒåŒæ—¶è¯´æ˜ /api/v1/realtime/monitors çš„è®¾è®¡æ„å›¾ä¸ç°çŠ¶ã€‚

## é¡¹ç›®ç»“æ„
- åç«¯é‡‡ç”¨ FastAPI + SQLAlchemy æ¶æ„ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ† API è·¯ç”±ä¸æœåŠ¡å±‚
- å‰ç«¯ä½¿ç”¨ Vue + Element UIï¼Œé€šè¿‡å°è£…çš„ API æ¨¡å—å‘èµ·è¯·æ±‚å¹¶æ¸²æŸ“è§†å›¾

```mermaid
graph TB
subgraph "å‰ç«¯"
FE_Index["views/realtime/index.vue"]
FE_API_Monitor["api/monitor.js"]
FE_API_Realtime["api/realtime.js"]
end
subgraph "åç«¯"
Router["api/v1/router.py"]
RT_API["api/v1/realtime.py"]
MON_API["api/v1/monitor.py"]
RT_SVC["services/realtime_service.py"]
MON_SVC["services/monitor_service.py"]
MODELS["models/monitor.py"]
SCHEMAS["schemas/monitor.py"]
RESP["api/response.py"]
end
FE_Index --> FE_API_Monitor
FE_Index --> FE_API_Realtime
FE_API_Monitor --> Router
FE_API_Realtime --> Router
Router --> RT_API
Router --> MON_API
RT_API --> RT_SVC
MON_API --> MON_SVC
MON_SVC --> MODELS
MON_SVC --> SCHEMAS
RT_API --> RESP
MON_API --> RESP
```

å›¾è¡¨æ¥æº
- [backend/app/api/v1/router.py](file://backend/app/api/v1/router.py#L1-L36)
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L1-L104)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L1-L135)
- [backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py#L1-L49)
- [backend/app/services/monitor_service.py](file://backend/app/services/monitor_service.py#L1-L120)
- [backend/app/models/monitor.py](file://backend/app/models/monitor.py#L1-L39)
- [backend/app/schemas/monitor.py](file://backend/app/schemas/monitor.py#L1-L32)
- [backend/app/api/response.py](file://backend/app/api/response.py#L1-L31)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L1-L120)
- [frontend/src/api/monitor.js](file://frontend/src/api/monitor.js#L1-L79)
- [frontend/src/api/realtime.js](file://frontend/src/api/realtime.js#L1-L62)

ç« èŠ‚æ¥æº
- [backend/app/api/v1/router.py](file://backend/app/api/v1/router.py#L1-L36)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L1-L120)

## æ ¸å¿ƒç»„ä»¶
- åç«¯ API å±‚
  - /api/v1/monitor/tasksï¼šè¿”å›ä»»åŠ¡åˆ—è¡¨
  - /api/v1/realtime/monitorsï¼šå®æ—¶ç›‘æµ‹ä»»åŠ¡åˆ—è¡¨ï¼ˆæœåŠ¡å±‚ä¸ºå ä½ï¼‰
- æœåŠ¡å±‚
  - MonitorService.get_tasksï¼šç»„è£…ä»»åŠ¡åˆ—è¡¨ï¼ŒåŒ…å«çŠ¶æ€ã€åŒºé—´ã€é€šçŸ¥ç­‰å­—æ®µ
  - RealtimeService.get_monitorsï¼šå®æ—¶ç›‘æµ‹ä»»åŠ¡åˆ—è¡¨ï¼ˆå ä½ï¼‰
- æ•°æ®æ¨¡å‹ä¸åºåˆ—åŒ–
  - MonitorTaskï¼šæ•°æ®åº“æ¨¡å‹
  - MonitorTaskResponseï¼šå“åº”åºåˆ—åŒ–æ¨¡å‹
- å‰ç«¯
  - index.vueï¼šæ¸²æŸ“ä»»åŠ¡å¡ç‰‡ã€å…³é”®è¯æœç´¢ã€çŠ¶æ€æ ‡ç­¾ã€æ›´æ–°æ—¶é—´æç¤º
  - api/monitor.jsï¼šå°è£… /api/v1/monitor/* è¯·æ±‚
  - api/realtime.jsï¼šå°è£… /api/v1/realtime/* è¯·æ±‚

ç« èŠ‚æ¥æº
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L1-L135)
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L1-L104)
- [backend/app/services/monitor_service.py](file://backend/app/services/monitor_service.py#L65-L118)
- [backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py#L1-L49)
- [backend/app/models/monitor.py](file://backend/app/models/monitor.py#L1-L39)
- [backend/app/schemas/monitor.py](file://backend/app/schemas/monitor.py#L1-L32)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L140-L245)
- [frontend/src/api/monitor.js](file://frontend/src/api/monitor.js#L1-L79)
- [frontend/src/api/realtime.js](file://frontend/src/api/realtime.js#L1-L62)

## æ¶æ„æ€»è§ˆ
åç«¯é‡‡ç”¨â€œè·¯ç”± -> æœåŠ¡ -> æ¨¡å‹/åºåˆ—åŒ– -> ç»Ÿä¸€å“åº”â€çš„åˆ†å±‚è®¾è®¡ï¼›å‰ç«¯é€šè¿‡å°è£…çš„ API æ¨¡å—è°ƒç”¨åç«¯æ¥å£ï¼Œå¹¶åœ¨ index.vue ä¸­å®Œæˆæœ¬åœ°ç­›é€‰ä¸æ¸²æŸ“ã€‚

```mermaid
sequenceDiagram
participant FE as "å‰ç«¯ index.vue"
participant API as "å‰ç«¯ api/monitor.js"
participant Router as "FastAPI è·¯ç”±"
participant SVC as "MonitorService"
participant DB as "æ•°æ®åº“"
FE->>API : è°ƒç”¨ getMonitorTasks()
API->>Router : GET /api/v1/monitor/tasks
Router->>SVC : get_tasks()
SVC->>DB : æŸ¥è¯¢ MonitorTask åˆ—è¡¨
DB-->>SVC : è¿”å›ä»»åŠ¡é›†åˆ
SVC-->>Router : ç»„è£…ä»»åŠ¡å­—å…¸åˆ—è¡¨
Router-->>API : success_response(data)
API-->>FE : è¿”å› Promise æˆåŠŸ
FE->>FE : æœ¬åœ° filteredStocks è¿‡æ»¤ä¸æ¸²æŸ“
```

å›¾è¡¨æ¥æº
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L454-L466)
- [frontend/src/api/monitor.js](file://frontend/src/api/monitor.js#L1-L10)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L14-L23)
- [backend/app/services/monitor_service.py](file://backend/app/services/monitor_service.py#L65-L118)
- [backend/app/api/response.py](file://backend/app/api/response.py#L10-L17)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### åç«¯ï¼šå®æ—¶ç›‘æµ‹ä»»åŠ¡åˆ—è¡¨æ¥å£è®¾è®¡
- æ¥å£è·¯å¾„
  - /api/v1/realtime/monitorsï¼ˆGETï¼‰ï¼šå®æ—¶ç›‘æµ‹ä»»åŠ¡åˆ—è¡¨
  - /api/v1/monitor/tasksï¼ˆGETï¼‰ï¼šæ™ºèƒ½ç›¯ç›˜ä»»åŠ¡åˆ—è¡¨ï¼ˆç”Ÿäº§å¯ç”¨ï¼‰
- è·¯ç”±ä¸æœåŠ¡ç»‘å®š
  - realtime.pyï¼šç»‘å®š RealtimeServiceï¼ˆå½“å‰æœåŠ¡å±‚ä¸ºå ä½ï¼‰
  - monitor.pyï¼šç»‘å®š MonitorServiceï¼ˆget_tasks å®Œæ•´å®ç°ï¼‰
- å“åº”ç»“æ„
  - ç»Ÿä¸€å“åº”ï¼šcodeã€messageã€data
  - data ä¸ºä»»åŠ¡æ•°ç»„ï¼Œæ¯æ¡ä»»åŠ¡åŒ…å«ï¼š
    - idã€task_nameã€stock_codeã€stock_nameã€status
    - check_intervalã€auto_tradeã€trading_hours_only
    - entry_minã€entry_maxã€take_profitã€stop_loss
    - notification_enabledã€quant_config
    - created_atã€updated_atã€is_running
- çŠ¶æ€å­—æ®µå«ä¹‰
  - statusï¼šrunning / stoppedï¼ˆè¿è¡Œä¸­ / å·²åœæ­¢ï¼‰
  - is_runningï¼šæœåŠ¡å±‚åˆ¤æ–­æŸè‚¡ç¥¨æ˜¯å¦åœ¨ç›‘æ§çº¿ç¨‹ä¸­è¿è¡Œ
  - trading_hours_onlyï¼šä»…äº¤æ˜“æ—¶æ®µç›‘æ§
  - auto_tradeï¼šæ˜¯å¦å¯ç”¨é‡åŒ–ï¼ˆMiniQMTï¼‰
  - notification_enabledï¼šæ˜¯å¦å¯ç”¨é€šçŸ¥
- å…³äºâ€œæœ€è¿‘è§¦å‘æ—¶é—´â€
  - å½“å‰ MonitorService.get_tasks è¿”å›çš„å­—æ®µä¸­æœªåŒ…å« last_checked æˆ– last_triggered æ—¶é—´æˆ³
  - è‹¥éœ€å±•ç¤ºâ€œæœ€è¿‘è§¦å‘æ—¶é—´â€ï¼Œå¯åœ¨æœåŠ¡å±‚æ‰©å±•å­—æ®µæˆ–åœ¨å‰ç«¯æ˜¾ç¤º created_at/updated_at

ç« èŠ‚æ¥æº
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L14-L23)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L14-L23)
- [backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py#L14-L18)
- [backend/app/services/monitor_service.py](file://backend/app/services/monitor_service.py#L65-L118)
- [backend/app/api/response.py](file://backend/app/api/response.py#L10-L17)

### å‰ç«¯ï¼šä»»åŠ¡åˆ—è¡¨æ¸²æŸ“ä¸ç­›é€‰
- æ¸²æŸ“å®¹å™¨
  - el-tab-pane æ ‡ç­¾é¡µâ€œğŸ“ˆ ç›‘æ§åˆ—è¡¨â€å†…ï¼Œä½¿ç”¨å¡ç‰‡ç½‘æ ¼å±•ç¤ºä»»åŠ¡
- å…³é”®äº¤äº’
  - é¡¶éƒ¨ç­›é€‰ï¼šå…³é”®è¯è¾“å…¥æ¡†ï¼ˆæ”¯æŒè‚¡ç¥¨ä»£ç /åç§°æ¨¡ç³ŠåŒ¹é…ï¼‰ã€è¯„çº§é€‰æ‹©å™¨
  - åŠ¨æ€æ ‡ç­¾ï¼šçŠ¶æ€æ ‡ç­¾ï¼ˆè¿è¡Œä¸­/æš‚åœä¸­ï¼‰ã€è¯„çº§æ ‡ç­¾ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰ã€ä»…äº¤æ˜“æ—¶æ®µæ ‡ç­¾
  - æ›´æ–°æ—¶é—´æç¤ºï¼šlast_checkedï¼ˆæ¥è‡ªåç«¯æ•°æ®ï¼‰ç”¨äºæ˜¾ç¤ºâ€œæœ€è¿‘æ£€æŸ¥æ—¶é—´â€
- æœ¬åœ°ç­›é€‰é€»è¾‘
  - computed filteredStocksï¼šåŸºäº keyword ä¸ rating çš„ç»„åˆè¿‡æ»¤
  - æ”¯æŒå›è½¦ä¸æ¸…ç©ºäº‹ä»¶è§¦å‘ç­›é€‰
- è¡¨æ ¼ç»„ä»¶ä¸å¡ç‰‡å¸ƒå±€
  - ä½¿ç”¨ Element UI å¡ç‰‡ç»„ä»¶å±•ç¤ºä»»åŠ¡å…³é”®ä¿¡æ¯ï¼ˆåŒºé—´ã€æ­¢ç›ˆæ­¢æŸã€é€šçŸ¥å¼€å…³ç­‰ï¼‰
  - é€šè¿‡æ ·å¼ç±»æ§åˆ¶å¡ç‰‡é—´è·ä¸å¸ƒå±€

```mermaid
flowchart TD
Start(["è¿›å…¥é¡µé¢"]) --> Load["è°ƒç”¨ getMonitorTasks() åŠ è½½ä»»åŠ¡"]
Load --> Render["æ¸²æŸ“ä»»åŠ¡å¡ç‰‡<br/>å±•ç¤ºçŠ¶æ€/è¯„çº§/åŒºé—´/é€šçŸ¥ç­‰"]
Render --> Filter["ç”¨æˆ·è¾“å…¥å…³é”®è¯/é€‰æ‹©è¯„çº§"]
Filter --> Compute["computed filteredStocks è¿‡æ»¤"]
Compute --> Show["æ˜¾ç¤ºè¿‡æ»¤åçš„ä»»åŠ¡åˆ—è¡¨"]
Render --> UpdateTime["æ˜¾ç¤º last_checked æœ€è¿‘æ£€æŸ¥æ—¶é—´"]
Show --> UpdateTime
```

å›¾è¡¨æ¥æº
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L140-L245)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L409-L418)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L454-L466)

ç« èŠ‚æ¥æº
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L140-L245)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L409-L418)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L454-L466)

### åˆ†é¡µä¸ç­›é€‰æœºåˆ¶
- åç«¯åˆ†é¡µ
  - /api/v1/realtime/notificationsï¼ˆGETï¼‰æ”¯æŒ pageã€page_size å‚æ•°
  - /api/v1/monitor/historyï¼ˆGETï¼‰æ”¯æŒ pageã€page_size å‚æ•°
  - ä½† /api/v1/monitor/tasksï¼ˆGETï¼‰æœªå®ç°åˆ†é¡µå‚æ•°
- å‰ç«¯åˆ†é¡µ
  - index.vue æœªå®ç°åˆ†é¡µç»„ä»¶ï¼Œå½“å‰ä¸ºä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨ä»»åŠ¡
  - è‹¥ä»»åŠ¡é‡å¢å¤§ï¼Œå»ºè®®åç«¯å¢åŠ åˆ†é¡µå‚æ•°å¹¶åœ¨å‰ç«¯å®ç°åˆ†é¡µç»„ä»¶
- ç­›é€‰ç»´åº¦
  - å‰ç«¯ï¼šå…³é”®è¯ï¼ˆè‚¡ç¥¨ä»£ç /åç§°ï¼‰ã€è¯„çº§ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰
  - åç«¯ï¼šå½“å‰ MonitorService.get_tasks æœªæš´éœ²æŒ‰çŠ¶æ€/è¯„çº§çš„è¿‡æ»¤å‚æ•°

ç« èŠ‚æ¥æº
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L90-L103)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L121-L134)
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L148-L163)

### ç”¨æˆ·èº«ä»½ä¸æ•°æ®éš”ç¦»
- è®¤è¯ä¸ä¾èµ–
  - åç«¯æä¾› OAuth2 å¯†é’¥æ–¹æ¡ˆä¸ get_current_user ä¾èµ–ï¼ˆç”¨äºåç»­å®Œå–„ï¼‰
  - å½“å‰ monitor.py/realtime.py çš„è·¯ç”±æœªå¼ºåˆ¶ä¾èµ–ç”¨æˆ·ä¸Šä¸‹æ–‡
- æ•°æ®éš”ç¦»å»ºè®®
  - åœ¨ MonitorService.get_tasks ä¸­å¢åŠ ç”¨æˆ·è¿‡æ»¤æ¡ä»¶ï¼ˆå¦‚ user_id å­—æ®µï¼‰
  - åœ¨è·¯ç”±å±‚å¼•å…¥ get_current_user å¹¶ä¼ é€’è‡³æœåŠ¡å±‚
  - ä¿æŒä¸ç°æœ‰ MonitorTask æ¨¡å‹ä¸€è‡´çš„å­—æ®µæ˜ å°„

ç« èŠ‚æ¥æº
- [backend/app/api/deps.py](file://backend/app/api/deps.py#L1-L43)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L14-L23)
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L14-L23)

### æ•°æ®æ¨¡å‹ä¸åºåˆ—åŒ–
- MonitorTaskï¼ˆæ•°æ®åº“æ¨¡å‹ï¼‰
  - å­—æ®µï¼šidã€task_nameã€stock_codeã€stock_nameã€statusã€check_intervalã€auto_tradeã€trading_hours_onlyã€entry_minã€entry_maxã€take_profitã€stop_lossã€notification_enabledã€quant_configã€created_atã€updated_at
- MonitorTaskResponseï¼ˆå“åº”æ¨¡å‹ï¼‰
  - å­—æ®µï¼šidã€task_nameã€stock_codeã€stock_nameã€statusã€check_intervalã€auto_tradeã€trading_hours_onlyã€created_atã€updated_at

ç« èŠ‚æ¥æº
- [backend/app/models/monitor.py](file://backend/app/models/monitor.py#L1-L39)
- [backend/app/schemas/monitor.py](file://backend/app/schemas/monitor.py#L1-L32)

## ä¾èµ–å…³ç³»åˆ†æ
- è·¯ç”±æ³¨å†Œ
  - /api/v1/router.py å°† monitor ä¸ realtime æ¨¡å—è·¯ç”±æ³¨å†Œåˆ° /monitor ä¸ /realtime å‰ç¼€
- API ä¸æœåŠ¡
  - monitor.py -> MonitorService.get_tasks
  - realtime.py -> RealtimeService.get_monitorsï¼ˆå ä½ï¼‰
- ç»Ÿä¸€å“åº”
  - success_response/error_response æä¾›ç»Ÿä¸€è¿”å›ç»“æ„

```mermaid
graph LR
Router["api/v1/router.py"] --> MON_API["api/v1/monitor.py"]
Router --> RT_API["api/v1/realtime.py"]
MON_API --> MON_SVC["services/monitor_service.py"]
RT_API --> RT_SVC["services/realtime_service.py"]
MON_SVC --> MODELS["models/monitor.py"]
MON_SVC --> SCHEMAS["schemas/monitor.py"]
MON_API --> RESP["api/response.py"]
RT_API --> RESP
```

å›¾è¡¨æ¥æº
- [backend/app/api/v1/router.py](file://backend/app/api/v1/router.py#L1-L36)
- [backend/app/api/v1/monitor.py](file://backend/app/api/v1/monitor.py#L1-L135)
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L1-L104)
- [backend/app/services/monitor_service.py](file://backend/app/services/monitor_service.py#L65-L118)
- [backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py#L1-L49)
- [backend/app/models/monitor.py](file://backend/app/models/monitor.py#L1-L39)
- [backend/app/schemas/monitor.py](file://backend/app/schemas/monitor.py#L1-L32)
- [backend/app/api/response.py](file://backend/app/api/response.py#L10-L17)

## æ€§èƒ½è€ƒé‡
- å‰ç«¯
  - ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨ä»»åŠ¡ï¼Œè‹¥ä»»åŠ¡é‡å¤§å¯èƒ½å½±å“é¦–å±æ¸²æŸ“ä¸å†…å­˜å ç”¨
  - å»ºè®®ï¼šåç«¯å¢åŠ åˆ†é¡µå‚æ•°ï¼Œå‰ç«¯å®ç°åˆ†é¡µç»„ä»¶ä¸æ‡’åŠ è½½
- åç«¯
  - MonitorService.get_tasks ä½¿ç”¨ ORM æŸ¥è¯¢å¹¶é€æ¡ç»„è£…å­—å…¸ï¼Œå¤æ‚åº¦ O(n)
  - å»ºè®®ï¼šåœ¨æ•°æ®åº“å±‚é¢å¢åŠ ç´¢å¼•ï¼ˆå¦‚ stock_codeã€statusã€created_atï¼‰ï¼Œå‡å°‘æ’åºä¸è¿‡æ»¤å¼€é”€
- ç½‘ç»œ
  - ç»Ÿä¸€å“åº”ç»“æ„ä¾¿äºå‰ç«¯å¤„ç†ï¼Œå»ºè®®ä¿æŒå­—æ®µç¨³å®šï¼Œé¿å…é¢‘ç¹å˜æ›´

[æœ¬èŠ‚ä¸ºé€šç”¨å»ºè®®ï¼Œæ— éœ€ç‰¹å®šæ–‡ä»¶æ¥æº]

## æ•…éšœæ’æŸ¥æŒ‡å—
- å‰ç«¯æ¥å£è°ƒç”¨å¤±è´¥
  - index.vue åœ¨åŠ è½½å¤±è´¥æ—¶é™çº§ä¸ºç¤ºä¾‹æ•°æ®ï¼Œæ£€æŸ¥ç½‘ç»œä¸ CORS é…ç½®
  - å‚è€ƒï¼š[frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L454-L466)
- åç«¯æ¥å£æœªå®ç°
  - /api/v1/realtime/monitors å¯¹åº”çš„ RealtimeService æ–¹æ³•ä¸ºå ä½
  - å‚è€ƒï¼š[backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L14-L23)ã€[backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py#L14-L18)
- å“åº”ç»“æ„ä¸ä¸€è‡´
  - ç»Ÿä¸€ä½¿ç”¨ success_responseï¼Œç¡®ä¿ data å­—æ®µæ‰¿è½½ä¸šåŠ¡æ•°æ®
  - å‚è€ƒï¼š[backend/app/api/response.py](file://backend/app/api/response.py#L10-L17)
- ç­›é€‰æ— æ•ˆ
  - /api/v1/monitor/tasks ä¸æ”¯æŒåç«¯åˆ†é¡µä¸ç­›é€‰å‚æ•°ï¼Œéœ€åœ¨å‰ç«¯å®Œæˆ
  - å‚è€ƒï¼š[frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L148-L163)

ç« èŠ‚æ¥æº
- [frontend/src/views/realtime/index.vue](file://frontend/src/views/realtime/index.vue#L454-L466)
- [backend/app/api/v1/realtime.py](file://backend/app/api/v1/realtime.py#L14-L23)
- [backend/app/services/realtime_service.py](file://backend/app/services/realtime_service.py#L14-L18)
- [backend/app/api/response.py](file://backend/app/api/response.py#L10-L17)

## ç»“è®º
- å½“å‰â€œæŸ¥è¯¢å®æ—¶ç›‘æµ‹ä»»åŠ¡â€çš„ç”Ÿäº§å¯ç”¨å®ç°é›†ä¸­åœ¨ /api/v1/monitor/tasksï¼ŒæœåŠ¡å±‚ MonitorService.get_tasks å·²å®Œæ•´è¿”å›ä»»åŠ¡åˆ—è¡¨åŠçŠ¶æ€å­—æ®µ
- å‰ç«¯ index.vue æä¾›äº†å®Œå–„çš„æœ¬åœ°ç­›é€‰ä¸æ¸²æŸ“èƒ½åŠ›ï¼Œæ”¯æŒå…³é”®è¯ä¸è¯„çº§ç­›é€‰ï¼Œå¹¶åŠ¨æ€å±•ç¤ºçŠ¶æ€æ ‡ç­¾ä¸æœ€è¿‘æ£€æŸ¥æ—¶é—´
- å®æ—¶ç›‘æµ‹æ¨¡å—çš„ /api/v1/realtime/monitors æ¥å£ç›®å‰æœåŠ¡å±‚ä¸ºå ä½ï¼Œå»ºè®®å°½å¿«è¡¥é½å®ç°å¹¶ä¸ MonitorService å¯¹é½å­—æ®µ
- è‹¥éœ€ç”¨æˆ·èº«ä»½è¿‡æ»¤ä¸åˆ†é¡µï¼Œå»ºè®®åœ¨ MonitorService ä¸­å¢åŠ ç”¨æˆ·è¿‡æ»¤ä¸åˆ†é¡µå‚æ•°ï¼Œå¹¶åœ¨è·¯ç”±å±‚å¼•å…¥ç”¨æˆ·ä¸Šä¸‹æ–‡